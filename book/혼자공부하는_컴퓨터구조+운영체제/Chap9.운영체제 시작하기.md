# 운영체제란 

> 실행할 프로그램에 필요한 자원을 할당하고, 프로그램이 올바르게 실행되도록 돕는 특별한 프로그램이 `운영체제`이다. 


운영체제 또한 여느 프로그램과 마찬가지로 메모리에 올라와 실행되는 프로그램이다.
하지만 운영체제는 매우 특별한 프로그램이기 때문에 항상 컴퓨터가 부팅될 때 메모리 내 `커널 영역`이라는 공간에 따로 적재되어 실행된다.

커널 영역을 제외한 나머지 영역, 사용자가 이용하는 프로그램이 적재되는 영역을 `사용자 영역`(= user space)이라고 한다. 
운영체제는 커널 영역에 적재되어 사용자 영역에 적재된 프로그램들에 자원을 할당하고 이들이 올바르게 실행되도록 돕는다. 

운영체제는 실행할 프로그램을 메모리에 적재하고, 더 이상 실행되지 않는 프로그램을 메모리에서 삭제하며 지속적으로 메모리 자원을 관리한다. 
또한 CPU 자원할당 또한 운영체제가 담당한다.


# 커널 
운영체제는 현존하는 프로글매 중 규모가 가장 큰 프로그램 중 하나이다. 
그래서 운영체제의 핵심 서비스를 담당하는 부분을 `커널`(kernel)이라고 부른다.

운영체제가 설치된 모든 기기에는 커널이 있다.
(이 책을 비롯한 대부분의 운영체제 전공서는 운영체제의 핵심부인 커널을 설명한다)

운영체제가 제공하는 서비스 중 커널에 포함되지 않는 서비스도 있는데, 대표적으로 사용자 인터페이스가 있다. 
`사용자 인터페이스`는 윈도우의 바탕화면과 같이 사용자가 컴퓨터와 상호작용할 수 있는 통로이다.

운영체제가 제공하는 사용자 인터페이스의 종류에는 `그래픽 유저 인터페이스`(GUI)와 `커맨드 라인 인터페이스`(CLI)가 있다.

# 이중 모드와 시스템 호출 

운영체제는 사용자가 실행하는 응용 프로그램이 하드웨어 자원에 직접 접근하는 것을 방지하여 자원을 보호한다. 
응용 프로그램들이 자원에 접근하려고 할 때 오직 자신을 통해서만 접근하도록하여 자원을 보호한다. 

이러한 운영체제의 문지기 역할은 이중 모드로써 구현된다. 
`이중 모드`(dual mode)란 CPU가 명령어를 실행하는 모드를 크게 사용자 모드와 커널 모드로 구분하는 방식이다. 
CPU는 명령어를 사용자 모드로써 실행할 수 있고, 커널 모드로써 실행할 수 있다. 

* 사용자 모드: 운영체제 서비스를 제공받을 수 없는 실행 모드이다.  즉, 커널 영역의 코드를 실행할 수 없는 모드이다. (default) 
* 커널 모드: 운영체제 서비스를 제공받을 수 있는 실행 모드이다. 즉, 커널 영역의 코드를 실행할 수 있는 모드이다. (운영체제는 커널모드로 실행되기 때문에 자원에 접근할 수 있다)

사용자 모드로 실행되는 프로그램이 자원에 접근하는 운영체제 서비스를 제공받으려면 운영체제에 요청을 보내 커널 모드로 전환되어야한다.
이때, 운영체제 서비스를 제공받기 위한 요청을 `시스템 호출`(system call)이라고 한다. 사용자 모드로 실행되는 프로그램은 시스템 호출을 통해 커널 모드로 전환하여 운영체제 서비스를 제공받을 수 있다.

시스템 호출은 일종의 인터럽트이다. 정확히는 소프트웨어 인터럽트이다.

## 운영체제의 핵심 서비스 

### 프로세스 관리
실행 중인 프로그램을 `프로세스`(process)라고 한다.
일반적으로 하나의 CPU는 한 번에 하나의 프로세스만 실행할 수 있기에 CPU는 이 프로세스들을 조금씩 번갈아가며 실행한다. 
다시 말해 CPU는 한 프로세스를 실행하다가 다른 프로세스로 실행을 전환하고, 그 프로세스를 실행하다가 또 다른 프로세스로 실행을 전환하는 것을 반복한다. 
